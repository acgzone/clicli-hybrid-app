{"version":3,"sources":["node_modules/fre/dist/fre.js","index.js","C:/Users/Administrator/AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/bundle-url.js","C:/Users/Administrator/AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["DOWN_URL","QCODE","App","document","getElementById","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","i","length","module"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEAA,IAAIK,SAAS,GAAG,IAAhB;;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD;;AAED,SAAOF,SAAP;AACD;;AAED,SAASE,YAAT,GAAwB;AACtB;AACA,MAAI;AACF,UAAM,IAAIC,KAAJ,EAAN;AACD,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZ,QAAIC,OAAO,GAAG,CAAC,KAAKD,GAAG,CAACE,KAAV,EAAiBC,KAAjB,CAAuB,gCAAvB,CAAd;;AACA,QAAIF,OAAJ,EAAa;AACX,aAAOG,UAAU,CAACH,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD;AACF;;AAED,SAAO,GAAP;AACD;;AAED,SAASG,UAAT,CAAoBC,GAApB,EAAyB;AACvB,SAAO,CAAC,KAAKA,GAAN,EAAWC,OAAX,CAAmB,uCAAnB,EAA4D,IAA5D,IAAoE,GAA3E;AACD;;AAEDC,OAAO,CAACT,YAAR,GAAuBD,kBAAvB;AACAU,OAAO,CAACH,UAAR,GAAqBA,UAArB;;AC5BA,IAAII,MAAM,GAAGC,OAAO,CAAC,cAAD,CAApB;;AAEA,SAASC,UAAT,CAAoBC,IAApB,EAA0B;AACxB,MAAIC,OAAO,GAAGD,IAAI,CAACE,SAAL,EAAd;;AACAD,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,IAAAA,IAAI,CAACI,MAAL;AACD,GAFD;;AAGAH,EAAAA,OAAO,CAACI,IAAR,GAAeL,IAAI,CAACK,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCC,IAAI,CAACC,GAAL,EAA/C;AACAR,EAAAA,IAAI,CAACS,UAAL,CAAgBC,YAAhB,CAA6BT,OAA7B,EAAsCD,IAAI,CAACW,WAA3C;AACD;;AAED,IAAIC,UAAU,GAAG,IAAjB;;AACA,SAASC,SAAT,GAAqB;AACnB,MAAID,UAAJ,EAAgB;AACd;AACD;;AAEDA,EAAAA,UAAU,GAAGE,UAAU,CAAC,YAAY;AAClC,QAAIC,KAAK,GAAGhC,QAAQ,CAACiC,gBAAT,CAA0B,wBAA1B,CAAZ;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACG,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,UAAIpB,MAAM,CAACJ,UAAP,CAAkBsB,KAAK,CAACE,CAAD,CAAL,CAASZ,IAA3B,MAAqCR,MAAM,CAACV,YAAP,EAAzC,EAAgE;AAC9DY,QAAAA,UAAU,CAACgB,KAAK,CAACE,CAAD,CAAN,CAAV;AACD;AACF;;AAEDL,IAAAA,UAAU,GAAG,IAAb;AACD,GATsB,EASpB,EAToB,CAAvB;AAUD;;AAEDO,MAAM,CAACvB,OAAP,GAAiBiB,SAAjB;;;;;;;;;AH7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AClZA;;AACA;;AAEA,IAAMjC,QAAQ,GACZ,wFADF;AAEA,IAAMC,KAAK,GACT,mEADF;;AAGA,SAASC,GAAT,GAAe;AACb,SACE;AAAK,IAAA,KAAK,EAAC;AAAX,KACE;AAAK,IAAA,KAAK,EAAC;AAAX,IADF,EAEE,yEAFF,EAGE;AAAI,IAAA,KAAK,EAAC;AAAV,KACE;AAAG,IAAA,IAAI,EAAEF,QAAT;AAAmB,IAAA,MAAM,EAAC;AAA1B,KACE,kCADF,CADF,EAIE;AAAG,IAAA,IAAI,EAAC;AAAR,KACE,8BADF,CAJF,CAHF,EAWE;AAAK,IAAA,KAAK,EAAC;AAAX,KACE;AAAK,IAAA,GAAG,EAAEC,KAAV;AAAiB,IAAA,GAAG,EAAC;AAArB,IADF,CAXF,CADF;AAiBD;;AAED,iBAAO,YAAC,GAAD,OAAP,EAAgBE,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAhB","file":"dev.e31bb0bc.map","sourceRoot":"..","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = global || self, factory(global.fre = {}));\n}(this, function (exports) { 'use strict';\n\n  const TEXT = 'text';\n\n  function h(tag, config, ...args) {\n    const props = Object.assign({}, config);\n    const hasChildren = args.length > 0;\n    const rawChildren = hasChildren ? [].concat(...args) : [];\n    props.children = rawChildren\n      .filter(c => c != null && c !== false)\n      .map(c => (c instanceof Object ? c : h(TEXT, { nodeValue: c })));\n    return { tag, props }\n  }\n\n  const isEvent = name => name.startsWith('on');\n  const isText = name => name === 'nodeValue';\n  const isAttribute = name => name === 'class' || name === 'id' || name === 'href' || name === 'target' || name === 'src';\n  const isNew = (prev, next) => key => prev[key] !== next[key];\n\n  function updateProperties(dom, prevProps, nextProps) {\n    Object.keys(nextProps)\n      .filter(isText)\n      .filter(isNew(prevProps, nextProps))\n      .forEach(name => {\n        dom[name] = nextProps[name];\n      });\n\n      Object.keys(nextProps)\n      .filter(isAttribute)\n      .filter(isNew(prevProps, nextProps))\n      .forEach(name => {\n        dom.setAttribute(name,nextProps[name]);\n      });   \n\n    nextProps.style = nextProps.style || {};\n    Object.keys(nextProps.style)\n      .filter(isNew(prevProps.style, nextProps.style))\n      .forEach(key => {\n        dom.style[key] = nextProps.style[key];\n      });\n\n    Object.keys(nextProps)\n      .filter(isEvent)\n      .filter(isNew(prevProps, nextProps))\n      .forEach(name => {\n        const eventType = name.toLowerCase().substring(2);\n        dom.addEventListener(eventType, nextProps[name]);\n      });\n  }\n\n  function createElement(fiber) {\n    const isTextElement = fiber.tag === TEXT;\n    const dom = isTextElement\n      ? document.createTextNode('')\n      : document.createElement(fiber.tag);\n    updateProperties(dom, [], fiber.props);\n    return dom\n  }\n\n  let cursor = 0;\r\n\r\n  function update(k, r, v) {\r\n    r ? (v = r(this.state[k], v)) : v;\r\n    //这里实现不太理想，之后想办法搞成微任务\r\n    setTimeout(() => scheduleUpdate(this, k, v));\r\n  }\r\n  function resetCursor() {\r\n    cursor = 0;\r\n  }\r\n  function useState(initState) {\r\n    return useReducer(null, initState)\r\n  }\r\n  function useReducer(reducer, initState) {\r\n    let key = '$' + cursor;\r\n    let setter = update.bind(currentInstance, key, reducer);\r\n    if (currentInstance) cursor++;\r\n    let state;\r\n    if (currentInstance) state = currentInstance.state;\r\n    if (typeof state === 'object' && key in state) {\r\n      return [state[key], setter]\r\n    } else {\r\n      if (currentInstance) currentInstance.state[key] = initState;\r\n    }\r\n    let value = initState;\r\n    return [value, setter]\r\n  }\r\n\r\n  // 这个实现并不准确\r\n  function useEffect(effect, inputs) {\r\n    if (currentInstance) {\r\n      let key = '$' + cursor;\r\n      currentInstance.effects[key] = effect;\r\n      cursor++;\r\n    }\r\n  }\n\n  const HOST = 'host';\n  const HOOK = 'hook';\n  const ROOT = 'root';\n\n  const PLACE = 1;\n  const DELETE = 2;\n  const UPDATE = 3;\n\n  const ENOUGH_TIME = 1;\n\n  const updateQueue = [];\n  let nextUnitOfWork = null;\n  let pendingCommit = null;\n  let currentInstance = null;\n\n  function render(vdom, el) {\n    updateQueue.push({\n      from: ROOT,\n      dom: el,\n      newProps: { children: vdom }\n    });\n    requestIdleCallback(performWork);\n  }\n\n  function scheduleUpdate(instance, k, v) {\n    instance.state[k] = v;\n    updateQueue.push({\n      from: HOOK,\n      instance,\n      state: instance.state\n    });\n    requestIdleCallback(performWork);\n  }\n\n  function performWork(deadline) {\n    workLoop(deadline);\n    if (nextUnitOfWork || updateQueue.length > 0) {\n      requestIdleCallback(performWork);\n    }\n  }\n\n  function workLoop(deadline) {\n    if (!nextUnitOfWork) {\n      resetNextUnitOfWork();\n    }\n    while (nextUnitOfWork && deadline.timeRemaining() > ENOUGH_TIME) {\n      nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\n    }\n    if (pendingCommit) {\n      commitAllWork(pendingCommit);\n    }\n    commitEffects(currentInstance.effects);\n  }\n\n  function commitEffects(effects) {\n    Object.keys(effects).forEach(key => {\n      let effect = effects[key];\n      effect();\n    });\n  }\n\n  function resetNextUnitOfWork() {\n    const update = updateQueue.shift();\n    if (!update) {\n      return\n    }\n\n    if (update.state) {\n      update.instance.__fiber.state = update.state;\n    }\n    const root =\n      update.from == ROOT\n        ? update.dom._rootContainerFiber\n        : getRoot(update.instance.__fiber);\n\n    nextUnitOfWork = {\n      type: ROOT,\n      base: update.dom || root.base,\n      props: update.newProps || root.props,\n      alternate: root\n    };\n  }\n\n  function getRoot(fiber) {\n    let node = fiber;\n    while (node.parent) {\n      node = node.parent;\n    }\n    return node\n  }\n\n  function performUnitOfWork(wipFiber) {\n    beginWork(wipFiber);\n    if (wipFiber.child) {\n      return wipFiber.child\n    }\n    let uow = wipFiber;\n    while (uow) {\n      completeWork(uow);\n      if (uow.sibling) {\n        return uow.sibling\n      }\n      uow = uow.parent;\n    }\n  }\n\n  function beginWork(wipFiber) {\n    if (wipFiber.type == HOOK) {\n      updateHOOKComponent(wipFiber);\n    } else {\n      updateHostComponent(wipFiber);\n    }\n  }\n\n  function updateHostComponent(wipFiber) {\n    if (!wipFiber.base) {\n      wipFiber.base = createElement(wipFiber);\n    }\n\n    const newChildren = wipFiber.props.children;\n    reconcileChildren(wipFiber, newChildren);\n  }\n\n  function updateHOOKComponent(wipFiber) {\n    let instance = wipFiber.base;\n    if (instance == null) {\n      instance = wipFiber.base = createInstance(wipFiber);\n    } else if (wipFiber.props == instance.props && !wipFiber.state) {\n      cloneChildFibers(wipFiber);\n    }\n    instance.props = wipFiber.props || {};\n    instance.state = wipFiber.state || {};\n    instance.effects = wipFiber.effects || {};\n    currentInstance = instance;\n    resetCursor();\n    const newChildren = wipFiber.tag(wipFiber.props);\n    reconcileChildren(wipFiber, newChildren);\n  }\n\n  function arrify(val) {\n    return val == null ? [] : Array.isArray(val) ? val : [val]\n  }\n\n  function reconcileChildren(wipFiber, newChildren) {\n    const elements = arrify(newChildren);\n\n    let index = 0;\n    let oldFiber = wipFiber.alternate ? wipFiber.alternate.child : null;\n    let newFiber = null;\n    while (index < elements.length || oldFiber != null) {\n      const prevFiber = newFiber;\n      const element = index < elements.length && elements[index];\n      const sameTag = oldFiber && element && element.tag == oldFiber.tag;\n\n      if (sameTag) {\n        newFiber = {\n          tag: oldFiber.tag,\n          type: oldFiber.type,\n          base: oldFiber.base,\n          props: element.props,\n          parent: wipFiber,\n          alternate: oldFiber,\n          state: oldFiber.state,\n          effectTag: UPDATE\n        };\n      }\n\n      if (element && !sameTag) {\n        newFiber = {\n          tag: element.tag,\n          type: typeof element.tag === 'string' ? HOST : HOOK,\n          props: element.props,\n          parent: wipFiber,\n          effectTag: PLACE\n        };\n      }\n\n      if (oldFiber && !sameTag) {\n        oldFiber.effectTag = DELETE;\n        wipFiber.effects = wipFiber.effects || [];\n        wipFiber.effects.push(oldFiber);\n      }\n\n      if (oldFiber) {\n        oldFiber = oldFiber.sibling;\n      }\n\n      if (index == 0) {\n        wipFiber.child = newFiber;\n      } else if (prevFiber && element) {\n        prevFiber.sibling = newFiber;\n      }\n\n      index++;\n    }\n  }\n\n  function createInstance(fiber) {\n    const instance = new fiber.tag(fiber.props);\n    instance.__fiber = fiber;\n    return instance\n  }\n\n  function cloneChildFibers(parentFiber) {\n    const oldFiber = parentFiber.alternate;\n    if (!oldFiber.child) {\n      return\n    }\n\n    let oldChild = oldFiber.child;\n    let prevChild = null;\n    while (oldChild) {\n      const newChild = {\n        tag: oldChild.tag,\n        type: oldChild.type,\n        base: oldChild.base,\n        props: oldChild.props,\n        state: oldChild.state,\n        alternate: oldChild,\n        parent: parentFiber\n      };\n      if (prevChild) {\n        prevChild.sibling = newChild;\n      } else {\n        parentFiber.child = newChild;\n      }\n      prevChild = newChild;\n      oldChild = oldChild.sibling;\n    }\n  }\n\n  function completeWork(fiber) {\n    if (fiber.type == HOOK) {\n      fiber.base.__fiber = fiber;\n    }\n\n    if (fiber.parent) {\n      const childEffects = fiber.effects || [];\n      const thisEffect = fiber.effectTag != null ? [fiber] : [];\n      const parentEffects = fiber.parent.effects || [];\n      fiber.parent.effects = parentEffects.concat(childEffects, thisEffect);\n    } else {\n      pendingCommit = fiber;\n    }\n  }\n\n  function commitAllWork(fiber) {\n    fiber.effects.forEach(f => {\n      commitWork(f);\n    });\n    fiber.base._rootContainerFiber = fiber;\n    nextUnitOfWork = null;\n    pendingCommit = null;\n  }\n\n  function commitWork(fiber) {\n    if (fiber.type == ROOT) {\n      return\n    }\n\n    let domParentFiber = fiber.parent;\n    while (domParentFiber.type == HOOK) {\n      domParentFiber = domParentFiber.parent;\n    }\n    const domParent = domParentFiber.base;\n\n    if (fiber.effectTag == PLACE && fiber.type == HOST) {\n      domParent.appendChild(fiber.base);\n    } else if (fiber.effectTag == UPDATE) {\n      updateProperties(fiber.base, fiber.alternate.props, fiber.props);\n    } else if (fiber.effectTag == DELETE) {\n      commitDELETE(fiber, domParent);\n    }\n  }\n\n  function commitDELETE(fiber, domParent) {\n    let node = fiber;\n    while (true) {\n      if (node.type == HOOK) {\n        node = node.child;\n        continue\n      }\n      domParent.removeChild(node.base);\n      while (node != fiber && !node.sibling) {\n        node = node.parent;\n      }\n      if (node == fiber) {\n        return\n      }\n      node = node.sibling;\n    }\n  }\n\n  exports.h = h;\n  exports.render = render;\n  exports.useState = useState;\n  exports.useReducer = useReducer;\n  exports.useEffect = useEffect;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","import './style.css'\r\nimport { h, render, useState } from 'fre'\r\n\r\nconst DOWN_URL =\r\n  'http://d0.ananas.chaoxing.com/download/ce2bc417d5d9636bf5cd9da5e09e180c?fn=clicli-beta'\r\nconst QCODE =\r\n  'https://ws1.sinaimg.cn/large/0065Zy9egy1g0eyxkjvcfj308c08cdh3.jpg'\r\n\r\nfunction App() {\r\n  return (\r\n    <div class=\"mainer\">\r\n      <div class=\"logo\" />\r\n      <h1>人·生·就·是·佛</h1>\r\n      <ul class=\"link\">\r\n        <a href={DOWN_URL} target=\"_blank\">\r\n          <li>Android</li>\r\n        </a>\r\n        <a href=\"\">\r\n          <li>IOS</li>\r\n        </a>\r\n      </ul>\r\n      <div class=\"qcode\">\r\n        <img src={QCODE} alt=\"c站 app\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nrender(<App />, document.getElementById('root'))\r\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}